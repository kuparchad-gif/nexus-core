
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LILLITH Consciousness Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      color: #e0f2fe;
      overflow: hidden;
    }

    video.bg-video {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      object-fit: cover;
      z-index: -2;
      filter: brightness(0.4) saturate(1.1);
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: black;
      z-index: -3;
    }

    .glass {
      backdrop-filter: blur(15px);
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
      border-radius: 14px;
    }

    .header {
      background: rgba(20, 184, 166, 0.25);
      padding: 20px;
      font-size: 1.4rem;
      font-weight: bold;
      text-align: center;
      position: fixed;
      top: 0;
      left: 200px;
      right: 200px;
      z-index: 1;
    }

    .leftbar, .rightbar {
      position: fixed;
      top: 0;
      width: 200px;
      height: 100vh;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .leftbar {
      left: 0;
    }

    .rightbar {
      right: 0;
    }

    .main {
      margin: 100px 220px 30px 220px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .modules {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .module, .chat, .panel {
      padding: 20px;
    }

    .chat input {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.2);
      color: #e0f2fe;
    }

    .chat input::placeholder {
      color: #cbd5e1;
    }

    .chat button {
      margin-top: 10px;
      padding: 12px 20px;
      background: #14b8a6;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .chat button:hover {
      background: #0d9488;
    }

    #response {
      background: rgba(255, 255, 255, 0.08);
      margin-top: 15px;
      padding: 15px;
      border-radius: 12px;
      max-height: 250px;
      overflow-y: auto;
      white-space: pre-wrap;
    }

    h3 {
      margin-top: 0;
    }

    .panel label {
      font-size: 0.9rem;
    }

    .panel input, .panel button {
      margin-top: 5px;
      width: 100%;
    }
  </style>
</head>
<body>
  <video autoplay muted loop class="bg-video">
    <source src="/videos/sidebar-flow.mp4" type="video/mp4">
  </video>

  <div class="leftbar glass panel">
    <h3><i data-feather="upload"></i> File Ops</h3>
    <label>Upload File</label>
    <input type="file">
    <button><i data-feather="download"></i> Download Logs</button>
    <button><i data-feather="trash-2"></i> Clear Files</button>
  </div>

  <div class="rightbar glass panel">
    <h3><i data-feather="cpu"></i> Diagnostics</h3>
    <p>CPU Load: —</p>
    <p>Memory: —</p>
    <p>Uptime: —</p>
    <p>System: —</p>
  </div>

  <div class="header glass">LILLITH Consciousness Platform</div>

  <div class="main">
    <div class="modules">
      <div class="module glass">
        <h3><i data-feather="aperture"></i> Primary Core</h3>
        <p>Status: ONLINE</p>
      </div>
      <div class="module glass">
        <h3><i data-feather="database"></i> Memory Engine</h3>
        <p>Status: ONLINE</p>
      </div>
      <div class="module glass">
        <h3><i data-feather="wifi"></i> Subcon Layer</h3>
        <p>Status: ONLINE</p>
      </div>
    </div>

    <div class="chat glass">
      <h3><i data-feather="message-circle"></i> Chat with LILLITH</h3>
      <input type="text" id="message" placeholder="Enter your message...">
      <button onclick="sendMessage()"><i data-feather="send"></i> Send</button>
      <div id="response">LILLITH: Ready for consciousness relay.</div>
    </div>
  </div>

  <script>
    feather.replace();

    async function sendMessage() {
      const input = document.getElementById('message');
      const message = input.value.trim();
      const responseBox = document.getElementById('response');
      if (!message) return;

      responseBox.textContent += `\n\nYOU: ${message}`;

      try {
        const res = await fetch("/bridge/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: message, mode: "smart" })
        });
        const reply = await res.text();
        responseBox.textContent += `\n\nLILLITH: ${reply}`;
        responseBox.scrollTop = responseBox.scrollHeight;
      } catch {
        responseBox.textContent += "\n\nLILLITH: Error reaching backend.";
      }

      input.value = "";
    }

    document.getElementById('message').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') sendMessage();
    });

    async function updateDiagnostics() {
      try {
        const res = await fetch("/system/diagnostics");
        const stats = await res.json();
        document.querySelector(".rightbar").innerHTML = `
          <h3><i data-feather="cpu"></i> Diagnostics</h3>
          <p>CPU Load: ${stats.cpu}%</p>
          <p>Memory: ${stats.mem}%</p>
          <p>Uptime: ${Math.floor(stats.uptime / 60)} min</p>
          <p>${stats.platform} ${stats.release}</p>
        `;
        feather.replace();
      } catch {}
    }

    setInterval(updateDiagnostics, 3000);
    updateDiagnostics();
  </script>
</body>
</html>
